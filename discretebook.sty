%%%  This is discretebook.sty
%%%  It is an attempt at designing a package to be used in my discrete course notes.  It will load amsmath, amsthm, etc and all the definitions I like.

\ProvidesPackage{discretebook}

\usepackage{amssymb, amsmath, amsthm, mathrsfs, multicol} 
%\usepackage[top=1in, bottom=1in, left=1in, right=1in]{geometry}
%\usepackage{changepage} % for adding extra indents in environments
%\usepackage{fancyhdr}
\usepackage{tikz}
%\usepackage{framed}
\usepackage{textcomp}
\usepackage{docmute}
\usepackage{answers}
\usepackage{pdfpages}
\usepackage{chessboard}
%\usepackage[titletoc]{appendix}
\usepackage[colorlinks=true, linkcolor=blue]{hyperref}
%\usepackage{bookmark}
%\usepackage{titlesec} % to create better chapter header layout
%\usepackage{booktabs}
\usepackage{import}
\usepackage{marvosym} % to include stop-sign symbol.
\usepackage{etoolbox} % to create toggles



%Number subsections:
\setsecnumdepth{subsection} %It might look better to turn this off, but then I should change the headings.


%Margins and such:
%\setstocksize{11in}{8.5in}
%\settrimmedsize{11in}{8.5in}{*}
%\settypeblocksize{8in}{6in}{*}
%\setbinding{1in}
\setlrmarginsandblock{1.5in}{1in}{*} %we have 1.5in margins on the ``inside'' of the page, for hole punch or binding, 1 inch on outside.
\setulmarginsandblock{1in}{1.5in}{*}
\setheadfoot{.75in}{1in}
\setheaderspaces{*}{.25in}{*}
\checkandfixthelayout
\fixpdflayout


%headers and footers:
%\setlength{\headheight}{15.2pt}
%\renewcommand{\headrulewidth}{0.1pt}
%\renewcommand{\chaptermark}[1]{\markboth{\textsc{#1}}{}}
%\renewcommand{\sectionmark}[1]{\markright{\textsc{\thesection ~ #1}}{}}
%\renewcommand{\subsectionmark}[1]{\markright{\textsc{\thesubsection ~ #1}}{}}
%\lhead{\footnotesize\leftmark}
%\chead{}
%\rhead{\footnotesize\rightmark}
%\newcommand{\heading}[3]{{\lhead{\footnotesize #1} \chead{\bf #2} \rhead{\footnotesize #3}}}
%\newcommand{\cleanpage}{\cfoot{}}
%%\makeatletter
%\renewcommand\tableofcontents{%
%    \chapter*{\contentsname
%        \@mkboth{}{\contentsname}}%
%%           \MakeUppercase\contentsname}{\MakeUppercase\contentsname}}% DELETED
%           %\MakeUppercase\contentsname}{}}% ADDED
%    \@starttoc{toc}%
%    } 
%%\makeatother

%%Chapters don't have pagebreak:
%\titleclass{\part}{top}
%\titleformat{\part}[display]
%  {\normalfont\huge\bfseries}{\centering\partname\ \thepart}{20pt}{\Huge\centering}
%\titlespacing*{\part}{0pt}{50pt}{40pt}
%\titleclass{\chapter}{top}
%\titleformat{\chapter}[display]
%  {\normalfont\LARGE\bfseries}{\chaptertitlename\ \thechapter}{1ex}{\huge}
%\titlespacing*{\chapter} {0pt}{0pt}{3ex}

\newtoggle{includeanswers} %this toggle will change the behavior of the question environment depending on whether we want to include answers to the questions or not.  
\def\withanswers{\toggletrue{includeanswers}} % putting \withanswers will turn on the includeanswers toggle until the end of the next questions environment.
\def\noanswers{\togglefalse{includeanswers}}

\newtoggle{showsolutions} %for hiding solutions to homework.
\newcommand{\showsolutions}{\toggletrue{showsolutions}}
\newcommand{\hidesolutions}{\togglefalse{showsolutions}}

%new list environments
\newcounter{question}
\newcounter{pcounter}
\newcounter{spcounter}
\newenvironment{questions}{%
	\iftoggle{includeanswers}{\WriteAnsFileStart}{}\begin{list}{\iftoggle{includeanswers}{\hyperlink{ans.\thesection.\Currentlabel.}}{}{\arabic{question}.~}}{
	\usecounter{question}}
	}{%
	\end{list} \iftoggle{includeanswers}{\WriteAnsFileStop}{}
	\noanswers %turns off includeanswers toggle - it must always be turned on if answers are wanted.
	}

\newenvironment{squestions}{\WriteAnsFileStartAlt\begin{list}{\hyperlink{ans.\thesection.\Currentlabel.}{\arabic{question}.~}}{\usecounter{question}}}{\end{list}\WriteAnsFileStop}





%\makeatletter
%\def\specialenvironment{list}
%\newcommand{\question}[1]{%
%  \ifx\@currenvir\specialenvironment   
%   \item\hypertarget{ques.\thesection.\Currentlabel.}{}  #1% inside "questions environment"  
%    %\item\hypertarget{ques.\thesection.\Currentlabel.}{} #1 % Inside "questions environment"
%  \else
%	\item #1 %
%  \fi
%}
%
%\makeatother
%
%%\makeatletter
%%\newcommand{\question}[1]{%
%%  \ifnum\pdfstrcmp{\@currenvir}{questions}=0
%%    {\item\hypertarget{ques.\thesection.\Currentlabel.}{} #1}% Inside itemize
%%  \else
%%    \item #1% Not inside itemize
%%  \fi
%%}
%%\makeatother

\newcommand{\question}{%
	\iftoggle{includeanswers}{%
		\item\hypertarget{ques.\thesection.\Currentlabel.}{}
	  }{%
		\item
	  }
	}
	
\def\bonusquestion{\question}

\newenvironment{parts}{\begin{list}{(\alph{pcounter})~}{\usecounter{pcounter}}}{\end{list}}

\renewcommand{\part}[1]{\item #1}

\newenvironment{subparts}{\begin{list}{(\alph{spcounter})~}{\usecounter{spcounter}}}{\end{list}}

\newcommand{\subpart}[1]{\item #1}

%\newcounter{answer}
%\newenvironment{answers}{\begin{list}{\hyperref[ques.\thesection.\Currentlabel.]{\arabic{answer}.~}}{\usecounter{answer}}}{\end{list}}

\newenvironment{ans}[1]{\item[\hyperlink{ques.#1}{#1}]\hypertarget{ans.#1}{}}{}

\newcommand{\ansparams}{{\thesection.\Currentlabel.}}

\def\WriteAnsFileStart{%
	\Writetofile{\ansfilename}{ %
		\protect\noindent{\textbf{Solutions for Section \thesection}}
	%	\protect\heading{}{}{Section \thesection\ Solutions} 
		\protect\begin{itemize}
	}
	\subsection*{Exercises\markright{\thesection ~ Exercises}}\addcontentsline{toc}{subsection}{Exercises}
	}
	
\def\WriteAnsFileStartAlt{%
	\Writetofile{\ansfilename}{\protect\clearpage \protect\noindent{\textbf{Solutions for Chapter \thesection}}
%	\protect\heading{}{}{Chapter \thesection\ Solutions} 
	\protect\begin{itemize}}
	\subsection{Sample Questions\markright{Sample Questions}}\addcontentsline{toc}{subsection}{Sample Questions}
	}
	
\def\WriteAnsFileStop{%
	\Writetofile{\ansfilename}{\protect\end{itemize}}
	}

\theoremstyle{plain}
\newtheorem*{theorem}{Theorem}
\newtheorem{problem}{Problem}
\newtheorem*{conjecture}{Conjecture}
%\newtheorem{answer}{Answer}

\theoremstyle{definition}
\newtheorem{definition}{Definition}
%\newtheorem{example}{Example}
\newtheorem{probfact}{Probability Fact}

\theoremstyle{remark}
\newtheorem*{remark}{Remark}
%\newtheorem*{solution}{Solution}

%Create indented ``example'' environment:
\newenvironment{example}{\vskip 1em \begin{adjustwidth}{3em}{3em}\textbf{Example}: }{\end{adjustwidth}\vskip 1em}

%Create ``solution'' environment:  Note that we only show this when the toggle ``showsolutions'' is on.
\newenvironment{solution}{\vskip 1ex \noindent {\em Solution}:}{}

%Create ``defbox'' environment to highlight important definitions
\newenvironment{defbox}[1]{\vskip 1em \begin{framed}\noindent\textbf{ #1\\{}}}{\end{framed}}
%Create ``activity'' environment for in-text worksheet type problems:
\newenvironment{activity}{\noanswers \vskip 1em \noindent\textbf{\large Investigate!}\vskip 1ex}{\centerline{{\LARGE \Stopsign} \quad \textbf{Do not proceed until you have attempted the above} \quad {\LARGE \Stopsign}}  \vskip 2em}


\newcommand{\ex}{\noindent\textbf{Ex: }}


\renewcommand{\qedsymbol}{\textsc{qed}}


\input{macros-discrete}

\endinput

%%% End of File.