<?xml version="1.0" encoding="UTF-8"?>

<section permid="ctW" xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="sec_planar">
  <title>Planar Graphs</title>
  <introduction permid="iTc">
    <investigation permid="Pal">
      <p permid="bYx">
        When a connected graph can be drawn without any edges crossing,
        it is called <term>planar</term>.
        When a planar graph is drawn in this way,
        it divides the plane into regions called <term>faces</term>.

        <ol permid="TKe">
          <li permid="fYw">
            <p permid="EBg">
              Draw, if possible,
              two different planar graphs with the same number of vertices, edges,
              and faces.
            </p>
          </li>

          <li permid="MfF">
            <p permid="kIp">
              Draw, if possible,
              two different planar graphs with the same number of vertices and edges,
              but a different number of faces.
            </p>
          </li>
        </ol>
      </p>
    </investigation>
    <p permid="IfG">
      When is it possible to draw a graph so that none of the edges cross?
      If this <em>is</em> possible,
      we say the graph is <term>planar</term>
          <idx><h>planar</h></idx>
      (since you can draw it on the <em>plane</em>).
    </p>

    <p permid="omP">
      Notice that the definition of planar includes the phrase
      <q>it is possible to.</q>
      This means that even if a graph does not look like it is planar,
      it still might be.
      Perhaps you can redraw it in a way in which no edges cross.
      For example, this is a planar graph:
    </p>
<!-- <figure>
  <caption>Drag the vertices so that no edges cross.</caption>
  <jsxgraph xml:id="jsx-k32">
    <input>
      var board = JXG.JSXGraph.initBoard('jsx-k32', {boundingbox: [-3, 2, 3, -2], axis:false, grid:false});
      var p1 = board.create('point', [-2,-1], {name:'', size:4, color:'blue'});
      var p2 = board.create('point', [0,-1], {name:'', size:4});
      var p3 = board.create('point', [2,-1], {name:'', size:4});
      var p4 = board.create('point', [-1,1], {name:'', size:4});
      var p5 = board.create('point', [1,1], {name:'', size:4});
      var e1 = board.create('line', [p1,p4], {straightFirst:false, straightLast:false, color:'black'});
      var e2 = board.create('line', [p1,p5], {straightFirst:false, straightLast:false});
      var e3 = board.create('line', [p2,p4], {straightFirst:false, straightLast:false});
      var e4 = board.create('line', [p2,p5], {straightFirst:false, straightLast:false});
      var e5 = board.create('line', [p3,p4], {straightFirst:false, straightLast:false});
      var e6 = board.create('line', [p3,p5], {straightFirst:false, straightLast:false});
    </input>
  </jsxgraph>
</figure> -->
    <sidebyside permid="ejj" width="20%">

      <image permid="tGC">

  <latex-image>\begin{tikzpicture}[scale=.7, xscale=1.5]
   \draw (-1, 0) \v -- (-.5,2) \v -- (0,0) \v -- (.5, 2) \v -- (1,0) \v -- (-.5,2) (.5,2) -- (-1,0);
    \end{tikzpicture}</latex-image>
      </image>

    </sidebyside>

    <p permid="UtY">
      That is because we can redraw it like this:
    </p>

    <sidebyside permid="Kqs" width="25%">

      <image permid="ZNL">

  <latex-image>\begin{tikzpicture}[scale=.7, xscale=1.5]
       \draw (-1, 0) \v -- (-.5,2) \v -- (0,0) \v -- (1.5, -1) \v -- (1,0) \v -- (-.5,2) (1.5,-1) -- (-1,0);
    \end{tikzpicture}</latex-image>
      </image>

    </sidebyside>

    <p permid="ABh">
      The graphs are the same, so if one is planar, the other must be too.
      However, the original drawing of the graph was not a
      <term>planar representation</term> of the graph.
    </p>

    <p permid="gIq">
      When a planar graph is drawn without edges crossing,
      the edges and vertices of the graph divide the plane into regions.
      We will call each region a <term>face</term>.
          <idx><h>faces</h></idx>
      The graph above has 3 faces
      (yes, we <em>do</em> include the
      <q>outside</q> region as a face).
      The number of faces does not change no matter how you draw the graph
      (as long as you do so without the edges crossing),
      so it makes sense to ascribe the number of faces as a property of the planar graph.
    </p>

    <p permid="MPz">
      WARNING: you can only count faces when the graph is drawn in a planar way.
      For example,
      consider these two representations of the same graph:
    </p>

    <sidebyside permid="qxB" widths="20% 25%" margins="auto" valign="bottom">

      <image permid="FUU">

  <latex-image>\begin{tikzpicture}
      \draw (45:1) \v -- (135:1) \v -- (225:1) \v -- (315:1) \v -- (45:1) -- (225:1) (135:1) -- (315:1);
    \end{tikzpicture}</latex-image>
      </image>

      <image permid="mcd">

  <latex-image>\begin{tikzpicture}
      \draw (45:1) \v -- (135:1) \v -- (225:1) \v -- (315:1) \v -- (45:1) -- (225:1);
      \draw (135:1) .. controls (70:2) and (20:2) .. (315:1);
    \end{tikzpicture}</latex-image>
      </image>

    </sidebyside>

    <p permid="sWI">
      If you try to count faces using the graph on the left,
      you might say there are 5 faces
      (including the outside).
      But drawing the graph with a planar representation shows that in fact there are only 4 faces.
    </p>

    <p permid="ZdR">
      There is a connection between the number of vertices (<m>v</m>),
      the number of edges (<m>e</m>) and the number of faces (<m>f</m>) in any connected planar graph.
      This relationship is called Euler's formula.
    </p>

    <assemblage permid="UPx">
      <title>Euler's Formula for Planar Graphs</title>
      <p permid="Fla">
        For any (connected) planar graph with <m>v</m> vertices,
        <m>e</m> edges and <m>f</m> faces, we have
        <me permid="EfH">
          v-e + f = 2
        </me>
            <idx><h>Euler's formula</h></idx>
      </p>
    </assemblage>

    <p permid="lsj">
      Why is Euler's formula true?
      One way to convince yourself of its validity is to draw a planar graph step by step.
      Start with the graph <m>P_2</m>:
    </p>

    <sidebyside permid="WEK" width="10%">

      <image permid="Sjm">

  <latex-image>\begin{tikzpicture}
      \draw (-.5,-.5) \v -- (.5,.5)\v;
    \end{tikzpicture}</latex-image>
      </image>

    </sidebyside>

    <p permid="Rzs">
      Any connected graph
      (besides just a single isolated vertex)
      must contain this subgraph.
      Now build up to your graph by adding edges and vertices.
      Each step will consist of either adding a new vertex connected by a new edge to part of your graph
      (so creating a new <q>spike</q>)
      or by connecting two vertices already in the graph with a new edge
      (completing a circuit).
    </p>

    <sidebyside permid="CLT" widths="30% 20%" margins="auto" valign="bottom">

      <image permid="yqv">

  <latex-image>\begin{tikzpicture}
      \draw (-1, 0) \v -- (-1,2) \v -- (1,2) \v -- (1,0) \v -- (-1,2);
      \draw[dashed] (1,2) -- (2,1) \v;
    \end{tikzpicture}</latex-image>
      </image>

      <image permid="exE">

  <latex-image>\begin{tikzpicture}
      \draw (-1, 0) \v -- (-1,2) \v -- (1,2) \v -- (1,0) \v -- (-1,2);
      \draw[dashed] (1,0) -- (-1,0);
    \end{tikzpicture}</latex-image>
      </image>

    </sidebyside>

    <p permid="xGB">
      What do these <q>moves</q> do?
      When adding the spike,
      the number of edges increases by 1, the number of vertices increases by one,
      and the number of faces remains the same.
      But this means that <m>v - e + f</m> does not change.
      Completing a circuit adds one edge,
      adds one face, and keeps the number of vertices the same.
      So again, <m>v - e + f</m> does not change.
    </p>

    <p permid="dNK">
      Since we can build any graph using a combination of these two moves,
      and doing so never changes the quantity <m>v - e + f</m>,
      that quantity will be the same for all graphs.
      But notice that our starting graph <m>P_2</m> has <m>v = 2</m>,
      <m>e = 1</m> and <m>f = 1</m>, so <m>v - e + f = 2</m>.
      This argument is essentially a proof by induction.
      A good exercise would be to rewrite it as a formal induction proof.
    </p>
  </introduction>

  <subsection permid="IBf">
    <title>Non-planar Graphs</title>
    <investigation permid="Zzq">
      <p permid="JUT">
        For the complete graphs <m>K_n</m>,
        we would like to be able to say something about the number of vertices,
        edges, and
        (if the graph is planar)
        faces.
        Let's first consider <m>K_3</m>:

        <ol permid="zRn">
          <li permid="smO">
            <p permid="QPy">
              How many vertices does <m>K_3</m> have?
              How many edges?
            </p>
          </li>

          <li permid="YtX">
            <p permid="wWH">
              If <m>K_3</m> is planar, how many faces should it have?
            </p>
          </li>
        </ol>
      </p>

      <p permid="qcc">
        Repeat parts (1) and (2) for <m>K_4</m>,
        <m>K_5</m>, and <m>K_{23}</m>.
      </p>

      <p permid="Wjl">
        What about complete bipartite graphs?
        How many vertices, edges, and faces
        (if it were planar)
        does <m>K_{7,4}</m> have?
        For which values of <m>m</m> and <m>n</m> are <m>K_n</m> and <m>K_{m,n}</m> planar?
      </p>
    </investigation>
    <p permid="OEM">
      Not all graphs are planar.
      If there are too many edges and too few vertices,
      then some of the edges will need to intersect.
      The first time this happens is in <m>K_5</m>.
    </p>

    <sidebyside permid="NkY" width="20%">

      <image permid="KEN">

  <latex-image>\begin{tikzpicture}
      \foreach \x in {0,...,4}
      \draw (\x*72+18:1) \v -- (\x*72+90:1) -- (\x*72-54:1);
    \end{tikzpicture}</latex-image>
      </image>

    </sidebyside>

    <p permid="uLV">
      If you try to redraw this without edges crossing,
      you quickly get into trouble.
      There seems to be one edge too many.
      In fact, we can prove that no matter how you draw it,
      <m>K_5</m> will always have edges crossing.
    </p>

    <theorem permid="AWG">
      <statement>
        <p permid="DvN">
          <m>K_5</m> is not planar.
        </p>
      </statement>
    </theorem>

    <proof permid="boD">
      <p permid="psi">
        The proof is by contradiction.
        So assume that <m>K_5</m> is planar.
        Then the graph must satisfy Euler's formula for planar graphs. <m>K_5</m> has 5 vertices and 10 edges,
        so we get
        <me permid="kmQ">
          5 - 10 + f = 2
        </me>
        which says that if the graph is drawn without any edges crossing,
        there would be <m>f = 7</m> faces.
      </p>

      <p permid="Vzr">
        Now consider how many edges surround each face.
        Each face must be surrounded by at least 3 edges.
        Let <m>B</m> be the total number of <em>boundaries</em>
        around all the faces in the graph.
        Thus we have that <m>B \ge 3f</m>.
        But also <m>B = 2e</m>,
        since each edge is used as a boundary exactly twice.
        Putting this together we get
        <me permid="QtZ">
          3f \le 2e
        </me>
      </p>

      <p permid="BGA">
        But this is impossible,
        since we have already determined that <m>f = 7</m> and <m>e = 10</m>,
        and <m>21 \not\le 20</m>.
        This is a contradiction so in fact <m>K_5</m> is not planar.
      </p>
    </proof>

    <p permid="aTe">
      The other simplest graph which is not planar is <m>K_{3,3}</m>
    </p>

    <sidebyside permid="tsh" width="20%">

      <image permid="qLW">

  <latex-image>\begin{tikzpicture}[yscale=1.2]
          \draw (-1,1) \v -- (-1,0)\v  -- (0,1) \v -- (0,0) \v -- (1,1) \v -- (1,0) \v -- (0,1) -- (-1,0) -- (1,1) (1,0) -- (-1,1) -- (0,0);
        \end{tikzpicture}</latex-image>
  </image>
</sidebyside>
<p>
Proving that <m>K_{3,3}</m> is not planar answers the houses and utilities puzzle: it is not possible to connect each of three houses to each of three utilities without the lines crossing.
</p>

<theorem>
<statement>
<p>
<m>K_{3,3}</m> is not planar.
</p>
</statement>
</theorem>

<proof>
  <p>
    Again, we proceed by contradiction. Suppose <m>K_{3,3}</m> were planar. Then by Euler's formula there will be 5 faces, since <m>v = 6</m>, <m>e = 9</m>, and <m>6 - 9 + f = 2</m>.
  </p>

  <p>
    How many boundaries surround these 5 faces? Let <m>B</m> be this number. Since each edge is used as a boundary twice, we have <m>B = 2e</m>. Also, <m>B \ge 4f</m> since each face is surrounded by 4 or more boundaries. We know this is true because <m>K_{3,3}</m> is bipartite, so does not contain any 3-edge cycles. Thus
    <me>
    4f \le 2e.
    </me>
  </p>

  <p>
    But this would say that <m>20 \le 18</m>, which is clearly false. Thus <m>K_{3,3}</m> is not planar.
  </p>
</proof>

<p>
Note the similarities and differences in these proofs. Both are proofs by contradiction, and both start with using Euler's formula to derive the (supposed) number of faces in the graph. Then we find a relationship between the number of faces and the number of edges based on how many edges surround each face. This is the only difference. In the proof for <m>K_5</m>, we got <m>3f \le 2e</m> and for <m>K_{3,3}</m> we go <m>4f \le 2e</m>. The coefficient of <m>f</m> is the key. It is the smallest number of edges which could surround any face. If some number of edges surround a face, then these edges form a cycle. So that number is the size of the smallest cycle in the graph.
</p>

<p>
In general, if we let <m>g</m> be the size of the smallest cycle in a graph (<m>g</m> stands for <em>girth</em><idx><h>girth</h></idx>, which is the technical term for this) then for any planar graph we have <m>gf \le 2e</m>. When this disagrees with Euler's formula, we know for sure that the graph cannot be planar.
</p>
</subsection>





<xi:include href="exercises/gt-planar.ptx"/>

</section>
